@model List<SimpleECA.Models.ProductViewModel>

<div class="container">
    <div class="row">
        @foreach (var item in Model)
        {
            <div class="col-3">
                <div class="card">
                    <div class="card-header position-relative">
                        <div class="productCarousel">
                            @foreach (var img in item.ProductImages)
                            {
                                <div class="box"><img class="card-img-top" src="data:image/jpg;base64,@(img.imageurl)" alt="@img.imagename"></div>
                            }
                        </div>
                        <div class="card-img-overlay d-flex justify-content-end">
                            <a href="#" class="card-link text-danger like">
                                <i class="fa fa-heart"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <h6 class="card-title">@item.productname</h6>
                        <h6 class="card-subtitle mb-2 text-muted">@item.brandName</h6>
                        <p class="card-text small">
                            @item.shortdescription
                        </p>
                        <div class="buy d-flex justify-content-between align-items-center small">
                            <div class="price text-success">
                                <strong><span class="pr-2">Rs.@(item.price - ((item.discount / 100) * item.price))</span> <span class="pr-2"><del class="pr-2"><i>@item.price</i></del></span><span class="pr-2">@(item.discount)% Off</span></strong>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button onclick="ProductAddtoCart(@(item.productid))" class="btn btn-danger mt-1"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
                    </div>
                </div>
            </div>
        }

    </div>
</div>
<style>
    .card {
        height: 450px;
    }

    .slick-slide img {
        height: 100px;
        object-fit: contain;
    }
</style>

<script>
    $(document).ready(function () {
        $('.productCarousel').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            dots: false,
            autoplay: true,
            autoplaySpeed: 1500,
            pauseOnHover: true,
            responsive: [{
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    speed: 500,
                    fade: true,
                    cssEase: 'linear'
                }
            }, {
                breakpoint: 520,
                settings: {
                    slidesToShow: 1,
                    speed: 500,
                    fade: true,
                    cssEase: 'linear'
                }
            }]
        });
    })

    function ProductAddtoWishList(productId) {
        debugger;
        showLoader();
        $.ajax({
            url: 'Product/ProductAddtoWishList',
            type: 'POST',
            dataType: 'json',
            data: { productId: productId },
            success: function (data) {
                debugger;
                hideLoader()
                showtoaster('Success');
                window.location.reload();
            },
            error: function (request, error) {
                debugger;
                hideLoader()
                showtoaster('Error');
            }
        });
    }
    function ProductAddtoCart(productId) {
        debugger;
        showLoader();
        $.ajax({
            url: 'Product/ProductAddtoCart',
            type: 'POST',
            dataType: 'json',
            data: { productId: productId },
            success: function (data) {
                debugger;
                hideLoader()
                showtoaster('Success');
                window.location.reload();
            },
            error: function (request, error) {
                debugger;
                hideLoader()
                showtoaster('Error');
            }
        });
    }
</script>